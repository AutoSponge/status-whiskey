<link rel="import" href="components/polymer/polymer.html">
<link rel="import" href="components/core-ajax/core-ajax.html">
<link rel="import" href="components/pvc-spinner/pvc-spinner.html">

<polymer-element name="status-whiskey">

    <template>
        <style>
            .http-status {
                color: white;
                background-color: black;
                padding: 20px;
                margin: 20px;
            }
        </style>

        <!-- fetch data! -->
        <core-ajax
                auto
                url="objects.json"
                handleAs="json"
                response="{{ response }}"
                on-core-response="{{ handleResponse }}"></core-ajax>

        <!-- start the app section -->
        <div id="app" layout vertical>

            <!-- the app's main content area -->
            <div id="content" flex relative>
                <div hidden?="{{ showLoader }}" horizontal layout wrap>
                    <template repeat="{{ code in response.codes }}">
                        <div class="http-status" horizontal center-justified layout>
                            <img width="300" height="230" alt="{{ code.code + ' ' + code.label }}" src="{{ code.img }}"/>
                            <div horizontal center-justified layout>
                                <h3>{{ code.code }}</h3>
                            </div>
                            <div horizontal center-justified layout>
                                <h4>{{ code.label }}</h4>
                            </div>
                        </div>
                    </template>
                </div>

                <div hidden?="{{ !showLoader }}">
                    <pvc-spinner type="fading-circle"></pvc-spinner>
                </div>

            </div>
        </div>
    </template>

    <script>

        Polymer( 'status-whiskey', {
            codes: [],
            showLoader: true,
            handleResponse: function () {
                this.showLoader = false;
            }
        } );

    </script>

</polymer-element>